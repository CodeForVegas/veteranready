!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(this,function(a){var b={prefix:"imagelistexpander-"},c=function(){var a=null;return function(b){a&&clearTimeout(a),a=setTimeout(b,500)}}(),d=function(d,e){var f=a.extend({},b,e),g=a(d),h=g.find("."+f.prefix+"item"),i=g.find("."+f.prefix+"trigger"),j=g.find("."+f.prefix+"trigger-close"),k=function(){a(window).bind("resize",l),i.bind("click",m),j.bind("click",n)},l=function(){c(function(){h.filter(".active").each(function(){var b=a(this),c=b.find("."+f.prefix+"expander-contents"),d=b.find("."+f.prefix+"expander"),e=c.outerHeight();b.css("height",b.find("."+f.prefix+"contents").outerHeight()+e),d.css("max-height",e)})})},m=function(){var b=a(this).parents("."+f.prefix+"item");b.hasClass("active")?p(b):o(b)},n=function(){p(h)},o=function(a){p(a.siblings());var b=a.find("."+f.prefix+"expander-contents"),c=a.find("."+f.prefix+"expander"),d=b.outerHeight();a.addClass("active").css("height",a.find("."+f.prefix+"contents").outerHeight()+d),c.css("max-height",d)},p=function(b){b=b.filter(".active");var c=b.find("."+f.prefix+"expander");b.each(function(){var b=a(this);b.css("height",b.find("."+f.prefix+"contents").outerHeight())}),b.removeClass("active"),c.css("max-height",0)};k()};return a.fn.imagelistexpander=function(b){a(this).each(function(){d(this,b||{})})},a});